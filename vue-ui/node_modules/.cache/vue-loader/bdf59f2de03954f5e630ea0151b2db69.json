{"remainingRequest":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\src\\components\\comment.vue?vue&type=style&index=0&id=a0559e02&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\src\\components\\comment.vue","mtime":1618004406989},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jYXJkIHsKICBib3gtc2hhZG93OiAwIDRweCA4cHggMCByZ2JhKDAsMCwwLDAuMik7Cn0KCi5jb250YWluZXIgewogIHBhZGRpbmc6IDJweCAxNnB4Owp9CgppbWcgewogIG1heC13aWR0aDogM2VtOwp9Cg=="},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components","sourcesContent":["<template class=\"w-100\">\n  <div class=\" col-12\">\n\n    <div class=\"card p-3\">\n      <div class=\"container\">\n        <h4><b>{{this.com.username}}</b></h4>\n        <h5>{{date = new Date(this.com.date).toDateString()}} : {{date = new Date(this.com.date).toLocaleTimeString()}}</h5>\n        <p>{{this.com.body}}</p>\n        <b-button @click=\"showModal\" v-show=\"matchUser\">Edit Comment</b-button>\n      </div>\n    </div>\n\n\n    <b-modal :ref=\"this.com.id\" id=\"edit-modal\" hide-header-close hide-footer no-close-on-esc no-close-on-backdrop title=\"Modify Comment\">\n      <b-form>\n\n        <b-form-group label=\"Edit Comment\">\n          <b-form-textarea\n              v-model=\"newBody\"\n              required\n              placeholder=\"Comment\"\n              :state=\"bodyState\"\n          ></b-form-textarea>\n          <!-- Invalid Feedback -->\n          <b-form-invalid-feedback id=\"input-live-feedback\">\n            Your comment must be 8 - 200 characters.\n          </b-form-invalid-feedback>\n        </b-form-group>\n        <b-button class=\"float-right mx-3\"  variant=\"primary\" @click=\"editComment\" :disabled=\"!bodyState\">Edit</b-button>\n        <b-button class=\"float-right mx-3\" @click=\"hideModal\">Cancel</b-button>\n        <b-button class=\"float-right mx-3\" variant=\"danger\" @click=\"deleteComment\">Delete</b-button>\n\n\n      </b-form>\n    </b-modal>\n\n  </div>\n\n</template>\n\n<script>\nimport GlobalMixin from \"@/mixins/global-mixin\";\n\nexport default {\nmixins: [GlobalMixin],\nname: \"comment\",\n  data(){\n    return{\n      newBody: '',\n      token: '',\n      username: '',\n      matchUser: false\n    }\n  },\n  props:{\n    com:{\n      type:Object\n    }\n  },\n  computed:{\n    bodyState() {\n      return this.newBody === '' ? null : this.newBody.length > 7 ?\n          this.newBody.length < 200: false;\n    }\n  },\n  methods:{\n    deleteComment(){\n\n      this.username = this.getCookie('username');\n      this.token = this.getCookie('token');\n        this.callAPI(this.COMMENT_URL, 'delete', {id:this.com.id,username:this.username,token:this.token})\n            .finally(() => {\n              window.location.reload();\n            });\n    },\n    editComment(){\n      this.username = this.getCookie('username');\n      this.token = this.getCookie('token');\n      if (this.bodyState) {\n        this.callAPI(this.COMMENT_URL, 'put', {id:this.com.id,username:this.username,token:this.token,body:this.newBody})\n            .finally(() => {\n              window.location.reload();\n            });\n      }\n    },\n    checkUserMatch(){\n      this.matchUser = this.com.username == this.getCookie('username');\n    },\n    hideModal(){\n      this.$refs[this.com.id].hide();\n    },\n    showModal(){\n      this.$refs[this.com.id].show();\n    }\n  },\n  mounted() {\n    this.checkUserMatch();\n    this.newBody = this.com.body;\n  }\n}\n\n</script>\n<style scoped>\n.card {\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n}\n\n.container {\n  padding: 2px 16px;\n}\n\nimg {\n  max-width: 3em;\n}\n</style>"]}]}