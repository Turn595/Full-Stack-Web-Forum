{"remainingRequest":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\src\\components\\commentSection.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\src\\components\\commentSection.vue","mtime":1618004406989},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBHbG9iYWxNaXhpbiBmcm9tICJAL21peGlucy9nbG9iYWwtbWl4aW4iOwppbXBvcnQgY29tbWVudCBmcm9tICJAL2NvbXBvbmVudHMvY29tbWVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY29tbWVudFNlY3Rpb24iLAogIG1peGluczogW0dsb2JhbE1peGluXSwKICBjb21wb25lbnRzOiB7CiAgICB1c2VyQ29tbWVudDogY29tbWVudAogIH0sCiAgcHJvcHM6IHsKICAgIGFydElEOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50QXJyYXk6IFtdLAogICAgICBodG1sOiAiIiwKICAgICAgbmV3Q29tbWVudDogewogICAgICAgIGFsaWFzOiAnJywKICAgICAgICBib2R5OiAnJywKICAgICAgICBhcnRJRDogdGhpcy5hcnRJRCwKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgdG9rZW46ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZW5Db21tZW50czogZnVuY3Rpb24gZ2VuQ29tbWVudHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmNhbGxBUEkodGhpcy5DT01NRU5UX1VSTCwgJ2dldCcsIHsKICAgICAgICAnYXJ0aWNsZWlkJzogdGhpcy5hcnRJRAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmNvbW1lbnRBcnJheSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcnMpIHsKICAgICAgICBlcnJvcnM7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLm5ld0NvbW1lbnQuYm9keSA9ICcnOwogICAgICB9KTsKICAgIH0sCiAgICBwb3N0Q29tbWVudDogZnVuY3Rpb24gcG9zdENvbW1lbnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5uZXdDb21tZW50LnVzZXJuYW1lID0gdGhpcy5nZXRDb29raWUoJ3VzZXJuYW1lJyk7CiAgICAgIHRoaXMubmV3Q29tbWVudC50b2tlbiA9IHRoaXMuZ2V0Q29va2llKCd0b2tlbicpOwoKICAgICAgaWYgKCF0aGlzLnN1Ym1pdFN0YXRlKSB7CiAgICAgICAgdGhpcy5uZXdDb21tZW50WydhcnRpY2xlaWQnXSA9IHRoaXMuYXJ0SUQ7CiAgICAgICAgdGhpcy5jYWxsQVBJKHRoaXMuQ09NTUVOVF9VUkwsICdwb3N0JywgdGhpcy5uZXdDb21tZW50KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi5nZW5Db21tZW50cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgYm9keVN0YXRlOiBmdW5jdGlvbiBib2R5U3RhdGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm5ld0NvbW1lbnQuYm9keSA9PT0gJycgPyBudWxsIDogdGhpcy5uZXdDb21tZW50LmJvZHkubGVuZ3RoID4gNyA/IHRoaXMubmV3Q29tbWVudC5ib2R5Lmxlbmd0aCA8IDIwMCA6IGZhbHNlOwogICAgfSwKICAgIHN1Ym1pdFN0YXRlOiBmdW5jdGlvbiBzdWJtaXRTdGF0ZSgpIHsKICAgICAgcmV0dXJuICF0aGlzLmJvZHlTdGF0ZTsKICAgIH0sCiAgICBsb2dnZWRJbjogZnVuY3Rpb24gbG9nZ2VkSW4oKSB7CiAgICAgIHJldHVybiAhKHRoaXMuZ2V0Q29va2llKCd1c2VybmFtZScpID09PSAiIik7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgYXJ0SUQ6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdBcnQsIG9sZEFydCkgewogICAgICAgIGlmIChuZXdBcnQgIT09IG9sZEFydCB8fCBuZXdBcnQgIT09IC0xKSB7CiAgICAgICAgICB0aGlzLmdlbkNvbW1lbnRzKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmVycm9yID0ge307CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["commentSection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,OAAA,WAAA,MAAA,uBAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,MAAA,EAAA,CAAA,WAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA;AADA,GAHA;AAMA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GANA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA,KAAA,KAHA;AAIA,QAAA,QAAA,EAAA,EAJA;AAKA,QAAA,KAAA,EAAA;AALA;AAHA,KAAA;AAWA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AAAA;;AACA,WAAA,OAAA,CAAA,KAAA,WAAA,EAAA,KAAA,EAAA;AAAA,qBAAA,KAAA;AAAA,OAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,MAAA,EAAA;AACA,QAAA,MAAA;AACA,OANA,EAMA,OANA,CAMA,YAAA;AAEA,QAAA,KAAA,CAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AACA,OATA;AAUA,KAZA;AAaA,IAAA,WAbA,yBAaA;AAAA;;AACA,WAAA,UAAA,CAAA,QAAA,GAAA,KAAA,SAAA,CAAA,UAAA,CAAA;AACA,WAAA,UAAA,CAAA,KAAA,GAAA,KAAA,SAAA,CAAA,OAAA,CAAA;;AACA,UAAA,CAAA,KAAA,WAAA,EAAA;AACA,aAAA,UAAA,CAAA,WAAA,IAAA,KAAA,KAAA;AACA,aAAA,OAAA,CAAA,KAAA,WAAA,EAAA,MAAA,EAAA,KAAA,UAAA,EACA,OADA,CACA,YAAA;AACA,UAAA,MAAA,CAAA,WAAA;AAEA,SAJA;AAKA;AACA;AAxBA,GAtBA;AAgDA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA,KAAA,UAAA,CAAA,IAAA,KAAA,EAAA,GAAA,IAAA,GAAA,KAAA,UAAA,CAAA,IAAA,CAAA,MAAA,GAAA,CAAA,GACA,KAAA,UAAA,CAAA,IAAA,CAAA,MAAA,GAAA,GADA,GACA,KADA;AAEA,KAJA;AAKA,IAAA,WALA,yBAKA;AACA,aAAA,CAAA,KAAA,SAAA;AACA,KAPA;AAQA,IAAA,QARA,sBAQA;AACA,aAAA,EAAA,KAAA,SAAA,CAAA,UAAA,MAAA,EAAA,CAAA;AACA;AAVA,GAhDA;AA4DA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,OADA,mBACA,MADA,EACA,MADA,EACA;AACA,YAAA,MAAA,KAAA,MAAA,IAAA,MAAA,KAAA,CAAA,CAAA,EAAA;AACA,eAAA,WAAA;AACA;;AACA,aAAA,KAAA,GAAA,EAAA;AACA;AANA;AADA;AA5DA,CAAA","sourcesContent":["<template>\n  <div class=\"flex-column row my-3\">\n\n\n    <h1>Comments: </h1>\n\n    <div class=\" col-12\" v-show=\"loggedIn\">\n\n      <b-form-group label=\"New Comment\" label-for=\"input-3\">\n        <b-form-textarea\n            v-model=\"newComment.body\"\n            required\n            placeholder=\"Comment...\"\n            class=\"form-control-lg\"\n            :state=\"bodyState\"\n        ></b-form-textarea>\n        <b-form-invalid-feedback id=\"input-live-feedback\">\n          Your comment must be 8 - 200 characters.\n        </b-form-invalid-feedback>\n      </b-form-group>\n\n      <b-form-group label-for=\"input-3\">\n        <b-button class=\"m-2\" @click=\"postComment\" variant=\"success\" :disabled=\"submitState\">Post Comment</b-button>\n      </b-form-group>\n\n\n    </div>\n\n\n    <div class=\"flex-row col-12 d-flex p-0 m-0\">\n      <div class=\"flex-column col-12 p-0 m-0\">\n        <div v-for=\"com in commentArray\" :key=\"com.id\" v-show=\"commentArray.length !== 0\">\n          <userComment :com=\"com\" class=\"my-4\"/>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nimport GlobalMixin from \"@/mixins/global-mixin\";\nimport comment from \"@/components/comment\";\n\nexport default {\n  name: \"commentSection\",\n  mixins:[GlobalMixin],\n  components:{\n    userComment: comment\n  },\n  props:{\n    artID: String\n  },\n  data(){\n    return{\n      commentArray: [],\n      html: \"\",\n      newComment: {\n        alias: '',\n        body: '',\n        artID: this.artID,\n        username: '',\n        token: ''\n      },\n    }\n  },\n  methods:{\n    genComments(){\n      this.callAPI(this.COMMENT_URL,'get', {'articleid':this.artID})\n          .then(response => {\n            this.commentArray = response.data;\n          })\n          .catch(errors => {\n            errors;\n          }).finally(() => {\n\n        this.newComment.body = '';\n          });\n    },\n    postComment(){\n      this.newComment.username = this.getCookie('username');\n      this.newComment.token = this.getCookie('token');\n      if (!this.submitState) {\n        this.newComment['articleid'] = this.artID;\n        this.callAPI(this.COMMENT_URL, 'post', this.newComment)\n            .finally(() => {\n              this.genComments();\n\n            });\n      }\n    },\n  },\n  computed:{\n    bodyState() {\n      return this.newComment.body === '' ? null : this.newComment.body.length > 7 ?\n          this.newComment.body.length < 200: false;\n    },\n    submitState() {\n      return !(this.bodyState);\n    },\n    loggedIn(){\n      return ! (this.getCookie('username') === \"\");\n    }\n  },\n  watch:{\n    artID:{\n      handler(newArt, oldArt){\n        if (newArt !== oldArt || newArt !== -1){\n          this.genComments();\n        }\n        this.error = {};\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}