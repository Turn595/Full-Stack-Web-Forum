{"remainingRequest":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\src\\components\\comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\src\\components\\comment.vue","mtime":1618004406989},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Andrew\\Saskpolytech\\CWEB-FinalProject\\cweb.2020.f09\\vue-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBHbG9iYWxNaXhpbiBmcm9tICJAL21peGlucy9nbG9iYWwtbWl4aW4iOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbR2xvYmFsTWl4aW5dLAogIG5hbWU6ICJjb21tZW50IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmV3Qm9keTogJycsCiAgICAgIHRva2VuOiAnJywKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBtYXRjaFVzZXI6IGZhbHNlCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIGNvbTogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBib2R5U3RhdGU6IGZ1bmN0aW9uIGJvZHlTdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubmV3Qm9keSA9PT0gJycgPyBudWxsIDogdGhpcy5uZXdCb2R5Lmxlbmd0aCA+IDcgPyB0aGlzLm5ld0JvZHkubGVuZ3RoIDwgMjAwIDogZmFsc2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZWxldGVDb21tZW50OiBmdW5jdGlvbiBkZWxldGVDb21tZW50KCkgewogICAgICB0aGlzLnVzZXJuYW1lID0gdGhpcy5nZXRDb29raWUoJ3VzZXJuYW1lJyk7CiAgICAgIHRoaXMudG9rZW4gPSB0aGlzLmdldENvb2tpZSgndG9rZW4nKTsKICAgICAgdGhpcy5jYWxsQVBJKHRoaXMuQ09NTUVOVF9VUkwsICdkZWxldGUnLCB7CiAgICAgICAgaWQ6IHRoaXMuY29tLmlkLAogICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgIHRva2VuOiB0aGlzLnRva2VuCiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdENvbW1lbnQ6IGZ1bmN0aW9uIGVkaXRDb21tZW50KCkgewogICAgICB0aGlzLnVzZXJuYW1lID0gdGhpcy5nZXRDb29raWUoJ3VzZXJuYW1lJyk7CiAgICAgIHRoaXMudG9rZW4gPSB0aGlzLmdldENvb2tpZSgndG9rZW4nKTsKCiAgICAgIGlmICh0aGlzLmJvZHlTdGF0ZSkgewogICAgICAgIHRoaXMuY2FsbEFQSSh0aGlzLkNPTU1FTlRfVVJMLCAncHV0JywgewogICAgICAgICAgaWQ6IHRoaXMuY29tLmlkLAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICB0b2tlbjogdGhpcy50b2tlbiwKICAgICAgICAgIGJvZHk6IHRoaXMubmV3Qm9keQogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2hlY2tVc2VyTWF0Y2g6IGZ1bmN0aW9uIGNoZWNrVXNlck1hdGNoKCkgewogICAgICB0aGlzLm1hdGNoVXNlciA9IHRoaXMuY29tLnVzZXJuYW1lID09IHRoaXMuZ2V0Q29va2llKCd1c2VybmFtZScpOwogICAgfSwKICAgIGhpZGVNb2RhbDogZnVuY3Rpb24gaGlkZU1vZGFsKCkgewogICAgICB0aGlzLiRyZWZzW3RoaXMuY29tLmlkXS5oaWRlKCk7CiAgICB9LAogICAgc2hvd01vZGFsOiBmdW5jdGlvbiBzaG93TW9kYWwoKSB7CiAgICAgIHRoaXMuJHJlZnNbdGhpcy5jb20uaWRdLnNob3coKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNoZWNrVXNlck1hdGNoKCk7CiAgICB0aGlzLm5ld0JvZHkgPSB0aGlzLmNvbS5ib2R5OwogIH0KfTs="},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,OAAA,WAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,WAAA,CADA;AAEA,EAAA,IAAA,EAAA,SAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA;AAJA,KAAA;AAMA,GAVA;AAWA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAXA;AAgBA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA,KAAA,OAAA,KAAA,EAAA,GAAA,IAAA,GAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA,GACA,KAAA,OAAA,CAAA,MAAA,GAAA,GADA,GACA,KADA;AAEA;AAJA,GAhBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AAEA,WAAA,QAAA,GAAA,KAAA,SAAA,CAAA,UAAA,CAAA;AACA,WAAA,KAAA,GAAA,KAAA,SAAA,CAAA,OAAA,CAAA;AACA,WAAA,OAAA,CAAA,KAAA,WAAA,EAAA,QAAA,EAAA;AAAA,QAAA,EAAA,EAAA,KAAA,GAAA,CAAA,EAAA;AAAA,QAAA,QAAA,EAAA,KAAA,QAAA;AAAA,QAAA,KAAA,EAAA,KAAA;AAAA,OAAA,EACA,OADA,CACA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,OAHA;AAIA,KATA;AAUA,IAAA,WAVA,yBAUA;AACA,WAAA,QAAA,GAAA,KAAA,SAAA,CAAA,UAAA,CAAA;AACA,WAAA,KAAA,GAAA,KAAA,SAAA,CAAA,OAAA,CAAA;;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,OAAA,CAAA,KAAA,WAAA,EAAA,KAAA,EAAA;AAAA,UAAA,EAAA,EAAA,KAAA,GAAA,CAAA,EAAA;AAAA,UAAA,QAAA,EAAA,KAAA,QAAA;AAAA,UAAA,KAAA,EAAA,KAAA,KAAA;AAAA,UAAA,IAAA,EAAA,KAAA;AAAA,SAAA,EACA,OADA,CACA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,SAHA;AAIA;AACA,KAnBA;AAoBA,IAAA,cApBA,4BAoBA;AACA,WAAA,SAAA,GAAA,KAAA,GAAA,CAAA,QAAA,IAAA,KAAA,SAAA,CAAA,UAAA,CAAA;AACA,KAtBA;AAuBA,IAAA,SAvBA,uBAuBA;AACA,WAAA,KAAA,CAAA,KAAA,GAAA,CAAA,EAAA,EAAA,IAAA;AACA,KAzBA;AA0BA,IAAA,SA1BA,uBA0BA;AACA,WAAA,KAAA,CAAA,KAAA,GAAA,CAAA,EAAA,EAAA,IAAA;AACA;AA5BA,GAtBA;AAoDA,EAAA,OApDA,qBAoDA;AACA,SAAA,cAAA;AACA,SAAA,OAAA,GAAA,KAAA,GAAA,CAAA,IAAA;AACA;AAvDA,CAAA","sourcesContent":["<template class=\"w-100\">\n  <div class=\" col-12\">\n\n    <div class=\"card p-3\">\n      <div class=\"container\">\n        <h4><b>{{this.com.username}}</b></h4>\n        <h5>{{date = new Date(this.com.date).toDateString()}} : {{date = new Date(this.com.date).toLocaleTimeString()}}</h5>\n        <p>{{this.com.body}}</p>\n        <b-button @click=\"showModal\" v-show=\"matchUser\">Edit Comment</b-button>\n      </div>\n    </div>\n\n\n    <b-modal :ref=\"this.com.id\" id=\"edit-modal\" hide-header-close hide-footer no-close-on-esc no-close-on-backdrop title=\"Modify Comment\">\n      <b-form>\n\n        <b-form-group label=\"Edit Comment\">\n          <b-form-textarea\n              v-model=\"newBody\"\n              required\n              placeholder=\"Comment\"\n              :state=\"bodyState\"\n          ></b-form-textarea>\n          <!-- Invalid Feedback -->\n          <b-form-invalid-feedback id=\"input-live-feedback\">\n            Your comment must be 8 - 200 characters.\n          </b-form-invalid-feedback>\n        </b-form-group>\n        <b-button class=\"float-right mx-3\"  variant=\"primary\" @click=\"editComment\" :disabled=\"!bodyState\">Edit</b-button>\n        <b-button class=\"float-right mx-3\" @click=\"hideModal\">Cancel</b-button>\n        <b-button class=\"float-right mx-3\" variant=\"danger\" @click=\"deleteComment\">Delete</b-button>\n\n\n      </b-form>\n    </b-modal>\n\n  </div>\n\n</template>\n\n<script>\nimport GlobalMixin from \"@/mixins/global-mixin\";\n\nexport default {\nmixins: [GlobalMixin],\nname: \"comment\",\n  data(){\n    return{\n      newBody: '',\n      token: '',\n      username: '',\n      matchUser: false\n    }\n  },\n  props:{\n    com:{\n      type:Object\n    }\n  },\n  computed:{\n    bodyState() {\n      return this.newBody === '' ? null : this.newBody.length > 7 ?\n          this.newBody.length < 200: false;\n    }\n  },\n  methods:{\n    deleteComment(){\n\n      this.username = this.getCookie('username');\n      this.token = this.getCookie('token');\n        this.callAPI(this.COMMENT_URL, 'delete', {id:this.com.id,username:this.username,token:this.token})\n            .finally(() => {\n              window.location.reload();\n            });\n    },\n    editComment(){\n      this.username = this.getCookie('username');\n      this.token = this.getCookie('token');\n      if (this.bodyState) {\n        this.callAPI(this.COMMENT_URL, 'put', {id:this.com.id,username:this.username,token:this.token,body:this.newBody})\n            .finally(() => {\n              window.location.reload();\n            });\n      }\n    },\n    checkUserMatch(){\n      this.matchUser = this.com.username == this.getCookie('username');\n    },\n    hideModal(){\n      this.$refs[this.com.id].hide();\n    },\n    showModal(){\n      this.$refs[this.com.id].show();\n    }\n  },\n  mounted() {\n    this.checkUserMatch();\n    this.newBody = this.com.body;\n  }\n}\n\n</script>\n<style scoped>\n.card {\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n}\n\n.container {\n  padding: 2px 16px;\n}\n\nimg {\n  max-width: 3em;\n}\n</style>"],"sourceRoot":"src/components"}]}